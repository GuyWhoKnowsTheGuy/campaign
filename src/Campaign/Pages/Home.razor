@page "/"
@using Campaign.Components
@inject NavigationManager NavigationManager

<MudText Typo="Typo.h3" GutterBottom="true">Swarm!</MudText>
<MudStack Spacing="3">
    <MudCard Outlined="true">
        <MudCardContent>
            <MudStack>
                <MudText>Swarm These Groups!</MudText>
                <MudStack Row="true" Spacing="3">
                    <MudLink Href="https://www.facebook.com/groups/1347271312390088/" Target="_blank">Hochul Sucks</MudLink>
                </MudStack>
            </MudStack>
        </MudCardContent>
    </MudCard>
    <MudCard Outlined="true">
        <MudCardContent>
            <MudStack>
                <MudText>Stephen A Smith</MudText>
                <MudStack Spacing="3" Row="true">
                    <MudLink Href="@("https://www.youtube.com/@stephenasmith")" Target="_blank"><YouTubeLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="https://www.instagram.com/stephenasmith" Target="_blank"><InstagramLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="https://x.com/stephenasmith" Target="_blank"><XLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="https://www.facebook.com/stephena" Target="_blank"><FacebookLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="@("https://tiktok.com/@stephenasmith")" Target="_blank"><TikTokLogo RootPath="@State?.RootPath"/></MudLink>
                </MudStack>
            </MudStack> 
        </MudCardContent>
    </MudCard>
    <MudCard Outlined="true">
        <MudCardContent>
            <MudStack>
                <MudText>Tucker Carlson</MudText>
                <MudStack Spacing="3" Row="true">
                    <MudLink Href="https://x.com/TuckerCarlson" Target="_blank"><XLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="https://www.instagram.com/tuckercarlson/" Target="_blank"><InstagramLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="@("https://www.youtube.com/@TuckerCarlson")" Target="_blank"><YouTubeLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="@("https://www.tiktok.com/@tuckercarlson")" Target="_blank"><TikTokLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="https://facebook.com/tuckercarlsonTCN" Target="_blank"><FacebookLogo RootPath="@State?.RootPath"/></MudLink>
                </MudStack>
            </MudStack> 
        </MudCardContent>
    </MudCard>
    <MudCard Outlined="true">
        <MudCardContent>
            <MudStack>
                <MudText>Tom Bilyeu</MudText>
                <MudStack Spacing="3" Row="true">
                    <MudLink Href="@("https://www.youtube.com/@TomBilyeu")" Target="_blank"><YouTubeLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="https://www.instagram.com/tombilyeu/" Target="_blank"><InstagramLogo RootPath="@State?.RootPath"/></MudLink> 
                    <MudLink Href="https://www.facebook.com/tombilyeu/" Target="_blank"><FacebookLogo RootPath="@State?.RootPath"/></MudLink>
                    <MudLink Href="https://x.com/tombilyeu" Target="_blank"><XLogo RootPath="@State?.RootPath"/></MudLink>
                </MudStack>
            </MudStack> 
        </MudCardContent>
    </MudCard>
</MudStack>
@code {
    [PersistentState]
    public ViewState? State { get; set; }

    protected override void OnInitialized()
    {
        if (this.State is null)
        {
            this.State = new("campaign");
        }
        
        base.OnInitialized();
    }
    
    protected override void OnAfterRender(bool firstRender)
    {
        if (this.State is not null)
        {
            var uri = new Uri(NavigationManager.BaseUri);
            
            this.State = this.State with { RootPath = uri.PathAndQuery.Replace("/", string.Empty) };
        }
        
        if (firstRender)
        {
            _ = this.InvokeAsync(() => this.StateHasChanged());
        }

        base.OnAfterRender(firstRender);
    }

    public record ViewState(string RootPath);
}